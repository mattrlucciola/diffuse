(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,n){},45:function(e,t,n){e.exports=n(71)},50:function(e,t,n){},51:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),o=n.n(c),s=(n(50),n(10)),i=n(2),u=n(4),l=(n(51),n(1)),m=n.n(l),p=n(3),f=n(11),d=function(e,t){localStorage.setItem(e,t)},b=function(){var e={};for(var t in localStorage){var n=localStorage[t];["key","getItem","setItem","removeItem","clear","length"].includes(t)||(e[t]=n)}return e},v=function(){for(var e in localStorage)["key","getItem","setItem","removeItem","clear","length"].includes(e)||localStorage.removeItem(e)};function j(e){var t=e.loginObj,n=e.lsObj,c=t.loggedIn,o=t.setLoggedIn,s=n.username,l=Object(a.useState)(""),d=Object(i.a)(l,2),b=d[0],j=d[1],g=Object(a.useState)(!1),O=Object(i.a)(g,2),h=O[0],E=O[1],y=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),o((function(){return!1}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Nav"},r.a.createElement("form",{className:"search",onSubmit:function(e){return e.preventDefault(),r.a.createElement(f.a,{to:"search".concat(b)})}},r.a.createElement("input",{type:"text",className:"searchbar",value:b,placeholder:"find projects/users",onChange:function(e){var t=e.target.value;j(t)}})),r.a.createElement(u.b,{to:c?"/feed":"/"},r.a.createElement("div",{className:"logo noselect"},r.a.createElement("div",{className:"left noselect"},"Diff"),r.a.createElement("div",{className:"right noselect"},"use"))),c?r.a.createElement("div",{className:"projects-profiles-links"},r.a.createElement(u.b,{to:{pathname:"/project/active/",state:{projectNavObj:{}}},className:"projects noselect"},"Create Project"),r.a.createElement("div",{className:"login-profile noselect",onMouseEnter:function(e){return E(!0)},onMouseLeave:function(e){return E(!1)}},r.a.createElement(u.b,{to:"/".concat(s,"/")},s),r.a.createElement("div",{className:"pplDropDown-container"},h&&r.a.createElement("div",{className:"pplDropDown-card"},r.a.createElement("div",{className:"logout",onClick:y},"Logout"))))):r.a.createElement("div",{className:"projects-profiles-links"},r.a.createElement(u.b,{to:"/projects/",className:"projects noselect"},"Recent Projects"),r.a.createElement(u.b,{to:"/login/",className:"login-profile noselect"},"Login / Register")))}function g(){return r.a.createElement("div",{className:"About"},"This is a little intro about the page")}n(32);var O=function(e){var t=document.cookie;if(t&&""!==t){var n;if(t.split(";").forEach((function(t){var a=t.trim().split("="),r=a[0],c=a[1];e===r&&(n=c.trim())})),n)return n;alert("no return value!")}},h=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O("csrftoken"),e.next=3,fetch(t,{credentials:"include",method:"POST",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":a},body:n});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O("csrftoken"),n.Authorization="Token ".concat(a),e.next=4,fetch(t,{credentials:"include",method:"PUT",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":r,Authorization:"Token ".concat(a)},body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Accept:"application/json","Content-Type":"application/json"},n&&n.diffuse_jwt&&(a=O("csrftoken"),r["X-CSRFToken"]=a),e.next=4,fetch(t,{credentials:"include",method:"GET",mode:"same-origin",headers:r,body:n});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O("csrftoken"),n.Authorization="Token ".concat(a),e.next=4,fetch(t,{credentials:"include",method:"DELETE",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":r,Authorization:"Token ".concat(a)},body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function I(e){var t=e.projectObj,n=t.user,a=t.name,c=t.project_slug,o=t.created_dt,s=n.username;return r.a.createElement("div",{className:"ProjectListElem",key:"PLE".concat(c)},r.a.createElement("div",{className:"author"},r.a.createElement(u.b,{to:"/".concat(s,"/")},s)),r.a.createElement("div",{className:"name"},r.a.createElement(u.b,{to:"/".concat(s,"/").concat(c,"/")},a)),r.a.createElement("div",{className:"date"},o&&function(e){var t="".concat(e).split("T"),n=Object(i.a)(t,2),a=n[0],r=n[1];return r=r.split(":"),r="".concat(r[0],":").concat(r[1]),"".concat(a," ").concat(r)}(o)))}function C(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/project/",e.next=3,k("/api/project/");case 3:t=e.sent,n=t.map((function(e,t){return r.a.createElement(I,{projectObj:e,key:"ple-".concat(t)})})),c(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",{className:"ProjectList fade-in"},n)}n(58),n(59),n(60);function D(e){var t=e.projectNavObj,n=t.collaborators,c=Object(a.useState)(n||[]),o=Object(i.a)(c,1)[0];return r.a.createElement("div",{className:"ProjectCollaboratorCard fade-in noselect",key:"pcc--".concat(t.user.username-t.project_slug)},r.a.createElement("div",{className:"title"},"Add"),r.a.createElement("div",{className:"collaborator-container"},o.map((function(e,t){return r.a.createElement("div",{className:"collaborator",key:"collab-name-".concat(t)},r.a.createElement(u.b,{to:"/".concat(e.username,"/")},e.username))}))))}var _=function(e){var t="\xe0\xe1\xe2\xe4\xe6\xe3\xe5\u0101\u0103\u0105\xe7\u0107\u010d\u0111\u010f\xe8\xe9\xea\xeb\u0113\u0117\u0119\u011b\u011f\u01f5\u1e27\xee\xef\xed\u012b\u012f\xec\u0142\u1e3f\xf1\u0144\u01f9\u0148\xf4\xf6\xf2\xf3\u0153\xf8\u014d\xf5\u0151\u1e55\u0155\u0159\xdf\u015b\u0161\u015f\u0219\u0165\u021b\xfb\xfc\xf9\xfa\u016b\u01d8\u016f\u0171\u0173\u1e83\u1e8d\xff\xfd\u017e\u017a\u017c\xb7/_,:;",n=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(" ","-").replace(n,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))})).replace("&","-and-").replace(/\W/g,"").replace("----","-").replace("---","-").replace("--","-").replace(/^-+/,"").replace(/-+$/,"")};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=e.projectNavProps,n=e.saveProps,c=e.loggedIn,o=t.projectObj,s=t.projectSlug,l=o.user,f=b().username,d=(b().user_id,o.collaborators),v=n.save,j=n.setSave,g=Object(a.useState)(!1),O=Object(i.a)(g,2),h=O[0],E=O[1],y=Object(a.useState)(!1),w=Object(i.a)(y,2),x=w[0],k=w[1],I=Object(a.useState)(!1),C=Object(i.a)(I,2),T=C[0],L=C[1],M=Object(a.useState)(o.name?o.name:"New Project"),R=Object(i.a)(M,2),F=R[0],z=R[1],U=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n="/api/project/",(a=A({},o)).project_slug=_(o.name),a.resource_slug=_("".concat(o.user.username,"-").concat(o.name)),delete a.user,"/project/active/"!==document.location.pathname){e.next=11;break}return e.next=9,N(n,JSON.stringify(a));case 9:e.next=15;break;case 11:return n="/api/project/".concat(a.resource_slug,"/"),delete a.resource_slug,e.next=15,S(n,a,b().diffuse_jwt);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=A({},o),!d){e.next=7;break}return a="/api/project/".concat(n.resource_slug,"/"),delete n.resource_slug,e.next=7,S(a,n,b().diffuse_jwt);case 7:L((function(){return!1}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"ProjectNav"},r.a.createElement("div",{className:"title-container",onClick:function(e){c?L((function(){return!0})):alert("Must be signed in to edit")}},T?r.a.createElement("form",{onSubmit:function(e){X(e)}},r.a.createElement("input",{type:"text",className:"title-edit",value:F,onChange:function(e){!function(e){var t=e.currentTarget.value;console.log(t),z((function(){return t}))}(e)},onBlur:function(e){X(e)},autoFocus:!0}),r.a.createElement("input",{type:"submit",className:"title-edit-submit",value:""})):r.a.createElement("div",{className:"title"},F)),r.a.createElement("div",{className:"sub-nav"},r.a.createElement("div",{className:"creator"},r.a.createElement(u.b,{to:"/".concat(l.username,"/")},l.username)),r.a.createElement("div",{className:"collaborate-history-container noselect"},r.a.createElement("div",{className:"collab-link noselect",onClick:function(){E(!h)}},d?"".concat(d.length," Collaborator").concat(d.length>1?"s":""):"Add Collaborators",h&&r.a.createElement(D,{projectNavObj:o})),r.a.createElement("div",{className:"history-link noselect"},r.a.createElement(u.b,{to:{pathname:"/".concat(l.username,"/").concat(s,"/history/"),state:{projectObj:o}}},"History"))),l.username===f&&r.a.createElement("div",{className:"save-edit-delete-container noselect",onClick:function(){k(!x),j((function(){return!v}))}},"|||",x?r.a.createElement("div",{className:"s-e-d-dropdown fade-in"},r.a.createElement("div",{className:"save",onClick:function(e){U(e)}},"Save"),r.a.createElement("div",{className:"delete",onClick:function(e){P(e)}},"Delete")):r.a.createElement("div",null))))}n(61),n(62),n(63),n(64);function M(e){var t=e.name;return r.a.createElement("div",{className:"InstrumentHead",style:{display:"flex",flexFlow:"row",justifyContent:"center",alignItems:"center"}},t)}var R=n(19),F=(n(65),n(8)),z={xScale:null,yScale:null,radiusScale:null,colorXScale:null,colorYScale:null};function U(e){var t=e.contentObj,n=e.midi,c=e.idProps,o=e.save,s=t.contentArr,u=t.updateProjectObjContent,l=n.pianoRoll.notes,m=c.idStr,p=c.instrumentArrIdx,f=l.map((function(e){var t=e.x,n=e.y,a=e.stepStart,r=e.midinote,c=e.weight,o=e.duration;return{x:t=t||a,y:n=n||r,weight:c=c||1,duration:o=o||1}})),d=Object(a.useState)(1100),b=Object(i.a)(d,1)[0],v=Object(a.useState)(1500),j=Object(i.a)(v,1)[0],g=Object(a.useState)(20),O=Object(i.a)(g,1)[0],h=Object(a.useState)(10),E=Object(i.a)(h,1)[0],y=Object(a.useState)(Math.floor(b/O)),w=Object(i.a)(y,1)[0],N=Object(a.useState)(Math.floor(j/E)),x=Object(i.a)(N,1)[0],S=Object(a.useState)(Object(R.a)(f)),k=Object(i.a)(S,2),P=k[0],I=k[1],C=Object(a.useState)(),D=Object(i.a)(C,2),_=D[0],T=D[1],A=function(){_.selectAll("rect").remove(),_.selectAll("rect").data(P).enter().append("rect").attr("x",(function(e){return z.xScale(e.x)+1})).attr("y",(function(e){return z.yScale(e.y)+1})).attr("width",(function(){return"".concat(O-1,"px")})).attr("height",(function(){return"".concat(E-1,"px")})),T((function(){return _}))},L=function(){var e,t=F.e("#".concat(m)).append("svg").attr("class","canvas").attr("width",b).attr("height",j);z.xScale=F.d().domain([1,w]).range([1,b]),z.yScale=F.d().domain([1,x]).range([j,1]),z.colorXScale=F.d().domain([0,F.c(P,(function(e){return e.x}))]).range([100,101]),z.colorYScale=F.d().domain([0,F.c(P,(function(e){return e.y}))]).range([100,101]),(e=t).append("g").attr("transform","translate(0,".concat(j,")")).attr("class","vertical").call(F.a(z.xScale).ticks(w).tickSize(-j).tickFormat("")),e.append("g").attr("transform","translate(0, 0)").attr("class","horizontal").call(F.b(z.yScale).ticks(2*w).tickSize(-b).tickFormat("")),T((function(){return t}))};return Object(a.useEffect)((function(){I((function(){return Object(R.a)(f)})),_&&(F.e(".canvas").remove(),T((function(){})))}),[document.location.pathname]),Object(a.useEffect)((function(){_?A():L()}),[_,P]),Object(a.useEffect)((function(){s[p].midi.pianoRoll.notes=P,_&&u(s)}),[o]),r.a.createElement("div",{className:"InstrumentCanvas",onClick:function(e){!function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.getBoundingClientRect().top,a=e.currentTarget.getBoundingClientRect().left,r=e.pageX-a,c=t+e.pageY-n,o={x:w-Math.floor((b-r)/O),y:1+Math.floor((j-c)/E),weight:1,duration:1},s=P.filter((function(e){return!(o.x===e.x&&o.y===e.y&&o.weight===e.weight&&o.duration===e.duration)}));s.length===P.length&&s.push(o),I((function(){return Object(R.a)(s)}))}(e)}},r.a.createElement("div",{className:"canvas-container",id:m}))}function X(e){var t=e.contentObj,n=e.instrumentObj,a=e.idProps,c=e.save,o=n.name,s=n.midi;return r.a.createElement("div",{className:"InstrumentContainer"},r.a.createElement(M,{name:o}),r.a.createElement(U,{contentObj:t,midi:s,idProps:a,save:c}))}function B(e){var t=e.contentObj,n=e.save,a=t.contentArr;return r.a.createElement("div",{className:"InstrumentList"},function(e){var a=[];return e&&(a=e.map((function(e,a){var c={idStr:"".concat(e.name).concat(a),instrumentArrIdx:a};return r.a.createElement(X,{contentObj:t,instrumentObj:e,idProps:c,save:n,key:"iccc-".concat(a)})}))),a}(a))}function J(e){var t=e.loggedIn,n=e.projectMainProps,a=e.save,c=n.projectMainObj.content,o=n.projectMainObj.name,s=n.updateProjectObjContent;return r.a.createElement("div",{className:"ProjectMain"},r.a.createElement(B,{loggedIn:t,contentObj:{contentArr:c,projectName:o,updateProjectObjContent:s},save:a}))}var V=function(e,t){return{content:[{midi:{bpm:128,pianoRoll:{automation:[],notes:[]},timeSig:"4/4"},name:"Piano"}],name:"New Project",user:{username:e,id:t},collaborators:[]}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=e.loggedIn,n=e.props.match.params,c=n.project_slug,o=n.username,s=b().username,u=b().user_id,l=Object(a.useState)(!1),f=Object(i.a)(l,2),d=f[0],v=f[1],j=Object(a.useState)(),g=Object(i.a)(j,2),O=g[0],h=g[1],E=Object(a.useState)(),y=Object(i.a)(E,2),w=y[0],N=y[1],x="".concat(o,"-").concat(c),S=function(e){e||((e=O).user={username:s,userId:u});var t={name:e.name,content:e.content};N((function(){return Y({},t)}))};return Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/project/".concat(x,"/"),e.prev=1,e.next=4,k(t);case 4:(n=e.sent)&&S(n),h((function(){return Y({},n)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Error in ProjectView: requesting",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();if("/project/active/"===document.location.pathname){var t=V(s,u);h((function(){return Y({},t)})),S(t)}else e()}),[document.location.pathname]),r.a.createElement("div",{className:"ProjectView"},O&&r.a.createElement(L,{loggedIn:t,projectNavProps:{projectObj:O,projectSlug:c},saveProps:{save:d,setSave:v},currentUsername:s}),O&&r.a.createElement(J,{loggedIn:t,projectMainProps:{projectMainObj:w,updateProjectObjContent:function(e){h((function(){return Y({},O,{content:e})}))}},save:d,currentUsername:s}))}n(66);function $(){return r.a.createElement("div",{className:"UserList"})}n(67);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=e.props,n=Object(a.useState)({}),c=Object(i.a)(n,2),o=c[0],s=c[1],l=t.match.params.username;return Object(a.useEffect)((function(){(function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/user/".concat(l,"/"),e.next=3,k(t);case 3:n=e.sent,s((function(){return G({},n)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),r.a.createElement("div",{className:"UserView"},r.a.createElement("div",{className:"right-side"},r.a.createElement("div",{className:"profile-picture"},r.a.createElement("img",{src:o.profile_picture,alt:"Profile Pictire"})),r.a.createElement("div",{className:"name"},r.a.createElement("div",{className:"first-name"},o.first_name),r.a.createElement("div",{className:"last-name"},o.last_name)),r.a.createElement("div",{className:"username"},o.username),r.a.createElement("div",{className:"contact-info"})),o.project&&function(){var e=o.project.map((function(e,t){var n=e.name,a=e.user,c=e.project_slug,o=e.created_dt,s=e.collaborators;return r.a.createElement("div",{className:"project-info",key:"uvpa-".concat(t)},r.a.createElement(u.b,{to:"/".concat(a.username,"/").concat(c,"/")},r.a.createElement("div",{className:"project-name"},n)),r.a.createElement("div",{className:"collaborator-ct"},"".concat(s.length," collaborator").concat(s.length>1?"s":"")),r.a.createElement("div",{className:"dt-created"},o))}));return r.a.createElement("div",{className:"project-list"},e)}())}n(68);function Q(e){var t=e.loginObj.loggedIn,n=Object(a.useState)(""),c=Object(i.a)(n,2),o=c[0],s=(c[1],function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=t.target,a={},r=0;r<n.length;r++)c=n[r],o=c.name,a[o]=c.value;return"/api/user/",e.next=7,x("/api/user/",a);case 7:1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(a.useEffect)((function(){return r.a.createElement(f.a,{to:"/".concat(o,"/")})}),[t,o]);var u=function(e,t,n){return r.a.createElement("input",{type:e,name:t,className:t,placeholder:n})};return r.a.createElement("div",{className:"UserCreateForm"},r.a.createElement("div",{className:"title"},"Register"),r.a.createElement("form",{onSubmit:function(e){return s(e)},className:"user-form"},r.a.createElement("div",{className:"part-1"},u("email","email","Email"),u("text","username","Userame"),u("password","password","Password")),r.a.createElement("div",{className:"part-2"},u("text","firstname","First Name"),u("text","lastname","Last Name"),u("phone","phone","Phone"),u("date","dob","Birthdate")),r.a.createElement("div",{className:"part-3"},u("url","profilepicture","Profile Picture")),u("submit","submit","Submit")))}n(69);function Z(e){var t=e.loginObj,n=t.loggedIn,c=t.setLoggedIn,o=Object(a.useState)(),s=Object(i.a)(o,2),l=s[0],b=s[1],v=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,o,s,i,u,l,p,f,v,j,g;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),o=t.target,s=0;s<o.length;s++)(i=o[s]).name&&"username"===i.name?n=i.value:i.name&&"password"===i.name&&(a=i.value);if(n&&b((function(){return n})),!n||!a){e.next=36;break}return"/api/auth/login/",u=JSON.stringify({username:n,password:a}),e.prev=7,e.next=10,N("/api/auth/login/",u);case 10:l=e.sent,f=l.status,[403].includes(f)&&alert("something went wrong, 403 status"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),alert("failure body: ",e.t0,u);case 18:return e.prev=18,e.next=21,l.json();case 21:p=e.sent,v=p.token,r=p.user.pk,d("diffuse_jwt",v),d("username",n),d("user_id",r),c((function(){return!0})),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(18),j=e.t1.status,alert("\n\nerror (below)\n\n",j,"\n\n",e.t1);case 34:e.next=38;break;case 36:n||a?n?a||(g="password field"):g="username field":g="username and password fields",alert("Please enter ".concat(g,"."));case 38:case"end":return e.stop()}}),e,null,[[7,15],[18,30]])})));return function(t){return e.apply(this,arguments)}}();return n&&l?r.a.createElement(f.a,{to:"/".concat(l,"/")}):r.a.createElement("div",{className:"UserLogin"},r.a.createElement("form",{onSubmit:function(e){return v(e)},className:"login"},r.a.createElement("input",{name:"username",type:"text",className:"username",placeholder:"Username",autoFocus:!0}),r.a.createElement("input",{name:"password",type:"password",className:"password",placeholder:"Password"}),r.a.createElement("input",{name:"submit",type:"submit",className:"submit",value:"Submit"})),r.a.createElement(u.b,{to:"/user/new/",className:"create-user"},"New here? Click here to signup"))}function ee(e){var t=e.loginObj,n=e.lsObj,a=t.loggedIn,c=t.setLoggedIn,o=n.username;return r.a.createElement("div",{className:"Main"},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/project/active/",render:function(e){return r.a.createElement(H,{loggedIn:a,props:e})}}),r.a.createElement(f.b,{exact:!0,path:"/login/",render:function(){return r.a.createElement(Z,{loginObj:{loggedIn:a,setLoggedIn:c},username:o})}}),r.a.createElement(f.b,{exact:!0,path:"/new/",render:function(){return r.a.createElement(Q,{loginObj:{loggedIn:a,setLoggedIn:c}})}}),r.a.createElement(f.b,{exact:!0,path:"/users/",render:function(e){return r.a.createElement($,{loggedIn:a,props:e})}}),r.a.createElement(f.b,{exact:!0,path:"/projects/recent/",render:function(){return r.a.createElement(C,{loggedIn:a})}}),r.a.createElement(f.b,{exact:!0,path:"/projects/",render:function(){return r.a.createElement(C,{loggedIn:a})}}),r.a.createElement(f.b,{exact:!0,path:"/feed/",render:function(){return r.a.createElement(C,{loggedIn:a})}}),r.a.createElement(f.b,{exact:!0,path:"/:username/:project_slug/",render:function(e){return r.a.createElement(H,{props:e})}}),r.a.createElement(f.b,{exact:!0,path:"/:username/",render:function(e){return r.a.createElement(K,{loggedIn:a,props:e,username:o})}}),r.a.createElement(f.b,{exact:!0,path:"/",component:g})))}n(70);function te(){var e=document.location.pathname,t=[];return e&&"/project/active/"===e&&t.push(r.a.createElement("div",{className:"add-instrument",onClick:function(){r.a.createElement("div",{className:"instrument-dropdown"},[])},key:"psbr"},"Add Instrument")),r.a.createElement("div",{className:"ProjectSidebar fade-in"},t)}function ne(e){var t=e.loggedIn;return r.a.createElement("div",{className:"SidebarLeft"},t?r.a.createElement(te,null):r.a.createElement("div",{className:"placeholderSidebar"},"Click to sign in or sign up here!"))}function ae(e){e.loggedIn;return r.a.createElement("div",{className:"SidebarRight"})}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=b(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(e),m=Object(i.a)(l,2),p=m[0],f=m[1],d=function(){var e=b();f((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}))};return Object(a.useEffect)((function(){d()}),[c]),r.a.createElement(u.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(j,{loginObj:{loggedIn:c,setLoggedIn:o},lsObj:p,checkLsObj:d}),r.a.createElement(ne,{loggedIn:c}),r.a.createElement(ee,{loginObj:{loggedIn:c,setLoggedIn:o},lsObj:p}),r.a.createElement(ae,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.fe27761e.chunk.js.map